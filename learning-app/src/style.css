@import "tailwindcss";

/* Class-based dark mode so theme toggle works (default is prefers-color-scheme) */
@custom-variant dark (&:where(.dark, .dark *));

/* App-specific overrides (optional) */
@layer base {
  body {
    @apply antialiased text-gray-900 bg-gray-50;
  }
  .dark body {
    @apply text-gray-100 bg-gray-900;
  }
}

/* Sidebar: visual separation between sections */
.sidebar-block + .sidebar-block {
  border-top: 1px solid #f3f4f6;
  padding-top: 0.75rem;
  margin-top: 0.25rem;
}
.dark .sidebar-block + .sidebar-block {
  border-top-color: #374151;
}

/* Section expand: fade in via CSS (avoids Motion timing/cleanup bugs) */
.sidebar-section-list {
  transition: opacity 0.15s ease-out;
}
.sidebar-section-list.section-list-animating {
  opacity: 0;
}
.sidebar-section-list.hidden {
  transition: none;
}

/* Hide native search clear so only our custom clear button shows */
#search-input::-webkit-search-cancel-button,
#search-input::-webkit-search-decoration {
  -webkit-appearance: none;
  appearance: none;
}
#search-input::-ms-clear {
  display: none;
}
#search-clear svg,
.search-icon-wrap svg {
  display: block;
}

/* Monaco playground: ensure container has size */
#playground-editor {
  min-height: 10rem;
}
#playground-editor .monaco-editor {
  min-height: 10rem;
}

/* Base font size (sidebar + main) */
#app {
  font-size: var(--app-font-size, 1rem);
}

/* Focus mode: hide sidebar and mobile header */
.focus-mode #sidebar,
.focus-mode .app-header-mobile {
  transform: translateX(-100%);
  pointer-events: none;
}
.focus-mode #sidebar {
  visibility: hidden;
}
.focus-mode main {
  max-width: none;
}

/* Print: lesson view only or progress summary */
@media print {
  #sidebar,
  .app-header-mobile,
  #focus-mode-toggle,
  #show-sidebar-btn,
  #theme-toggle,
  #sidebar-close,
  #sidebar-open,
  .no-print {
    display: none !important;
  }
  body.print-progress #app-root {
    display: none !important;
  }
  body.print-progress #print-progress-content {
    display: block !important;
  }
  #print-progress-content {
    display: none;
  }
}
